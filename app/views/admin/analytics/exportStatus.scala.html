@(status: Seq[(org.joda.time.LocalDate, Int, Seq[(String, Long)])])(implicit session: Session, flash: Flash, identity: models.user.User)
@views.html.admin.layout.base("Analytics Export", "analytics") {
  <h3>Analytics Export Status</h3>

  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Date</th>
        <th>Rows</th>
        <th>Filename</th>
        <th>Size</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      @status.map { s =>
        <tr>
          <td>@s._1</td>
          <td>@s._2</td>
          <td>@s._3.map { x => <a href="">@x._1</a><br> }</td>
          <td>@s._3.map { x => @x._2<br> }</td>
          <td>Ok</td>
          <td style="width: 120px;">
            @if(s._2 > 0) {
              @defining(controllers.admin.routes.AnalyticsExportController.wipeDatabase(s._1)) { url =>
                <a href="@url" class="btn btn-default btn-xs"><span title="Remove Day From Database" class="glyphicon glyphicon-fire"></span></a>
              }
            }
            @if(s._3.nonEmpty) {
              <a href="" class="btn btn-default btn-xs"><span title="Upload Files To Database" class="glyphicon glyphicon-upload"></span></a>
            }
            @if(s._2 > 0 && s._3.isEmpty) {
              @defining(controllers.admin.routes.AnalyticsExportController.cacheFiles(s._1)) { url =>
                <a href="@url" class="btn btn-default btn-xs"><span title="Cache Files" class="glyphicon glyphicon-hdd"></span></a>
              }
            }
            @if(s._3.nonEmpty) {
              <a href="" class="btn btn-default btn-xs"><span title="Download All Files Locally" class="glyphicon glyphicon-download"></span></a>
              <a href="" class="btn btn-default btn-xs"><span title="Remove Files" class="glyphicon glyphicon-remove"></span></a>
            }
          </td>
        </tr>
      }
    </tbody>
  </table>
}
